# ุฏููู ุฅุนุฏุงุฏ ูุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช Firebase

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ุงูุชุทุจูู ูุงุณุชุฎุฏุงู ูุนุงุฏูุงุช ุงุญุชุณุงุจ ุงูุฑุงุชุจ ุงูุฌุฏูุฏุฉ. ูุชุทูุจ ูุฐุง ุงูุชุญุฏูุซ ุชุนุฏููุงุช ุนูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู Firebase.

## ๐ง ุงูุฅุนุฏุงุฏ ุงููุทููุจ

### 1. ุชุซุจูุช Firebase CLI
```bash
npm install -g firebase-tools
```

### 2. ุชุณุฌูู ุงูุฏุฎูู ุฅูู Firebase
```bash
firebase login
```

### 3. ุชุญุฏูุฏ ุงููุดุฑูุน
```bash
firebase use nazafati-system
```

## ๐ ุฎุทูุงุช ุงูุชุญุฏูุซ

### ุงูุฎุทูุฉ 1: ูุดุฑ ุงูููุงุฑุณ ูููุงุนุฏ ุงูุฃูุงู
```bash
# ุชุดุบูู ุงูุณูุฑูุจุช ุงูุดุงูู
npm run db:update

# ุฃู ูุฏููุงู
firebase deploy --only firestore:indexes
firebase deploy --only firestore:rules
```

### ุงูุฎุทูุฉ 2: ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
```bash
# ุชุญุฏูุซ ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ ุงูููุฌูุฏุฉ
npm run db:update-schema
```

### ุงูุฎุทูุฉ 3: ุฅูุดุงุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)
```bash
# ุฅูุดุงุก ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุญุฏุซุฉ
npm run db:create-sample
```

## ๐ ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซ

### 1. ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
```bash
node scripts/test-firebase-connection.mjs
```

### 2. ุงุฎุชุจุงุฑ ุงูุชุทุจูู
1. ุชุดุบูู ุงูุชุทุจูู: `npm run dev`
2. ูุชุญ ุงููุชุตูุญ ุนูู `http://localhost:5173`
3. ุชุณุฌูู ุงูุฏุฎูู
4. ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ
5. ุงูุชุฃูุฏ ูู ุธููุฑ ุงูุญููู ุงูุฌุฏูุฏุฉ

## ๐๏ธ ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญููู ุงูุฌุฏูุฏุฉ ูู `monthly-entries`:
- `holidays` (number): ุนุฏุฏ ุงูุนุทู
- `fridaysAndHolidays` (number): ุนุฏุฏ ุงูุฌูุน ูุงูุนุทู  
- `overtimeAfterReference` (number): ุงูุฅุถุงูู ุจุนุฏ ุงููุฑุฌุน
- `daysInMonth` (number): ุนุฏุฏ ุฃูุงู ุงูุดูุฑ

### ุงูุญููู ุงูุฌุฏูุฏุฉ ูู `totals`:
- `totalOvertime` (number): ุฅุฌูุงูู ุงูุฅุถุงูู
- `totalSalary` (number): ุฅุฌูุงูู ุงูุฑุงุชุจ
- `netSalary` (number): ุตุงูู ุงูุฑุงุชุจ

## ๐ ููุงุนุฏ ุงูุฃูุงู

ุชู ุชุญุฏูุซ ููุงุนุฏ ุงูุฃูุงู ูุฏุนู ุงูุญููู ุงูุฌุฏูุฏุฉ:

```javascript
// ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ
match /monthly-entries/{entryId} {
  allow read: if isAdmin() || isFinance() || 
    (isSupervisor() && isEmployeeInOwnRegion(resource.data.employeeId));
  allow write: if isAdmin() || 
    (isSupervisor() && isEntryForOwnRegionFromRequest());
}
```

## ๐ ุงูููุงุฑุณ ุงูุฌุฏูุฏุฉ

ุชู ุฅุถุงูุฉ ุงูููุงุฑุณ ุงูุชุงููุฉ:

1. `monthly-entries` ุนูู `monthKey + regionId + status`
2. `monthly-entries` ุนูู `monthKey + holidays`
3. `monthly-entries` ุนูู `monthKey + fridaysAndHolidays`
4. `monthly-entries` ุนูู `monthKey + overtimeAfterReference`

## โ๏ธ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ ุงูุตูุงุญูุงุช
```bash
# ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู
firebase login --reauth

# ุงูุชุญูู ูู ุงููุดุฑูุน
firebase projects:list

# ุชุญุฏูุฏ ุงููุดุฑูุน ุงูุตุญูุญ
firebase use nazafati-system
```

### ูุดููุฉ ุงูููุงุฑุณ
```bash
# ุงูุชุญูู ูู ุญุงูุฉ ุงูููุงุฑุณ
firebase firestore:indexes

# ุฅุนุงุฏุฉ ูุดุฑ ุงูููุงุฑุณ
firebase deploy --only firestore:indexes
```

### ูุดููุฉ ููุงุนุฏ ุงูุฃูุงู
```bash
# ุงุฎุชุจุงุฑ ููุงุนุฏ ุงูุฃูุงู
firebase firestore:rules:test

# ุฅุนุงุฏุฉ ูุดุฑ ุงูููุงุนุฏ
firebase deploy --only firestore:rules
```

## ๐งช ุงุฎุชุจุงุฑ ุดุงูู

### 1. ุงุฎุชุจุงุฑ ุงููุนุงุฏูุงุช
```bash
# ุชุดุบูู ุงุฎุชุจุงุฑ ุงููุนุงุฏูุงุช
node test-integration.mjs
```

### 2. ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
```bash
# ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
node scripts/test-firebase-connection.mjs
```

### 3. ุงุฎุชุจุงุฑ ุงูุชุทุจูู
1. ูุชุญ ุงูุชุทุจูู
2. ุชุณุฌูู ุงูุฏุฎูู
3. ุฅูุดุงุก ุฅุฏุฎุงู ุดูุฑู ุฌุฏูุฏ
4. ุงูุชุญูู ูู ุงูุญุณุงุจุงุช
5. ุชูููุฏ ูุดู ุฑูุงุชุจ

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ููุงุฌูุฉ ูุดุงูู:

1. **ุฑุงุฌุน ุณุฌูุงุช Firebase Console**
2. **ุชุญูู ูู ููุงุนุฏ ุงูุฃูุงู**
3. **ุชุฃูุฏ ูู ุตุญุฉ ุงูููุงุฑุณ**
4. **ุฑุงุฌุน ูุฐุง ุงูุฏููู**

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] ุชู ุชุซุจูุช Firebase CLI
- [ ] ุชู ุชุณุฌูู ุงูุฏุฎูู ุฅูู Firebase
- [ ] ุชู ุชุญุฏูุฏ ุงููุดุฑูุน ุงูุตุญูุญ
- [ ] ุชู ูุดุฑ ุงูููุงุฑุณ ุงูุฌุฏูุฏุฉ
- [ ] ุชู ูุดุฑ ููุงุนุฏ ุงูุฃูุงู
- [ ] ุชู ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- [ ] ุชู ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
- [ ] ุชู ุงุฎุชุจุงุฑ ุงูุชุทุจูู
- [ ] ุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุญุณุงุจุงุช

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0.0  
**ุงููุทูุฑ:** ูุฑูู ูุธุงูุชู
