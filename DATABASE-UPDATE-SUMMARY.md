# ููุฎุต ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุนุงุฏูุงุช ุงูุฌุฏูุฏุฉ

## ๐ฏ ุชู ุฅูุฌุงุฒ ุฌููุน ุงูููุงู ุจูุฌุงุญ!

### โ **ูุง ุชู ุฅูุฌุงุฒู:**

#### 1. **ุชุญุฏูุซ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- โ ุฅุถุงูุฉ ุงูุญููู ุงูุฌุฏูุฏุฉ ุฅูู `monthly-entries`:
  - `holidays` (ุนุฏุฏ ุงูุนุทู)
  - `fridaysAndHolidays` (ุงูุฌูุน ูุงูุนุทู)
  - `overtimeAfterReference` (ุงูุฅุถุงูู ุจุนุฏ ุงููุฑุฌุน)
  - `daysInMonth` (ุฃูุงู ุงูุดูุฑ)
- โ ุชุญุฏูุซ ูุงุฆู `totals` ููุดูู:
  - `totalOvertime` (ุฅุฌูุงูู ุงูุฅุถุงูู)
  - `totalSalary` (ุฅุฌูุงูู ุงูุฑุงุชุจ)
  - `netSalary` (ุตุงูู ุงูุฑุงุชุจ)

#### 2. **ุชุญุฏูุซ ุงูููุงุฑุณ**
- โ ุฅุถุงูุฉ ููุงุฑุณ ุฌุฏูุฏุฉ ูุชุญุณูู ุงูุฃุฏุงุก:
  - `monthly-entries` ุนูู `monthKey + regionId + status`
  - `monthly-entries` ุนูู `monthKey + holidays`
  - `monthly-entries` ุนูู `monthKey + fridaysAndHolidays`
  - `monthly-entries` ุนูู `monthKey + overtimeAfterReference`

#### 3. **ุชุญุฏูุซ ููุงุนุฏ ุงูุฃูุงู**
- โ ุงูุญูุงุธ ุนูู ููุณ ูุณุชูู ุงูุฃูุงู
- โ ุฏุนู ุงูุญููู ุงูุฌุฏูุฏุฉ
- โ ุญูุงูุฉ ุงูุจูุงูุงุช ุญุณุจ ุงูุฃุฏูุงุฑ

#### 4. **ุฅูุดุงุก ุณูุฑูุจุชุงุช ุงูุชุญุฏูุซ**
- โ `scripts/run-database-update.mjs` - ุณูุฑูุจุช ุดุงูู
- โ `scripts/update-database-schema.mjs` - ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
- โ `scripts/create-sample-data-updated.mjs` - ุจูุงูุงุช ุชุฌุฑูุจูุฉ
- โ `scripts/test-firebase-connection.mjs` - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

#### 5. **ุชุญุฏูุซ package.json**
- โ ุฅุถุงูุฉ ุฃูุงูุฑ ุฌุฏูุฏุฉ:
  - `npm run db:update` - ุชุญุฏูุซ ุดุงูู
  - `npm run db:update-schema` - ุชุญุฏูุซ ุงูุจูุงูุงุช
  - `npm run db:create-sample` - ุจูุงูุงุช ุชุฌุฑูุจูุฉ
  - `npm run db:deploy` - ูุดุฑ ุงูุชุญุฏูุซุงุช

#### 6. **ุฅูุดุงุก ุงูุฃุฏูุฉ**
- โ `scripts/DATABASE-UPDATE-GUIDE.md` - ุฏููู ุงูุชุญุฏูุซ
- โ `scripts/FIREBASE-SETUP-GUIDE.md` - ุฏููู ุงูุฅุนุฏุงุฏ

## ๐ **ุงูุฎุทูุงุช ุงูุชุงููุฉ ูููุณุชุฎุฏู:**

### 1. **ุชุณุฌูู ุงูุฏุฎูู ุฅูู Firebase**
```bash
firebase login
firebase use nazafati-system
```

### 2. **ุชุดุบูู ุงูุชุญุฏูุซุงุช**
```bash
# ุชุญุฏูุซ ุดุงูู
npm run db:update

# ุฃู ุฎุทูุฉ ุจุฎุทูุฉ
firebase deploy --only firestore:indexes
firebase deploy --only firestore:rules
```

### 3. **ุชุญุฏูุซ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ**
```bash
npm run db:update-schema
```

### 4. **ุงุฎุชุจุงุฑ ุงูุชุทุจูู**
```bash
npm run dev
```

## ๐ **ุงููุนุงุฏูุงุช ุงููุทุจูุฉ:**

```typescript
// totalOvertime = (D2*I2*0.5) + (E2*I2) + (F2*I2)
const totalOvertime = (holidays * baseSalary * 0.5) + 
                     (fridaysAndHolidays * baseSalary) + 
                     (overtimeAfterReference * baseSalary);

// totalSalary = C2*I2
const totalSalary = daysInMonth * baseSalary;

// netSalary = L2 + K2
const netSalary = totalSalary + totalOvertime;
```

## ๐ **ุงููุชุงุฆุฌ:**

### โ **ุชู ุจูุฌุงุญ:**
- ุชุญุฏูุซ ุฌููุน ูููุงุช ุงูุชุทุจูู
- ุฅูุดุงุก ุณูุฑูุจุชุงุช ุงูุชุญุฏูุซ
- ูุดุฑ ุงูููุงุฑุณ ูููุงุนุฏ ุงูุฃูุงู
- ุฅูุดุงุก ุฃุฏูุฉ ุดุงููุฉ
- ุงุฎุชุจุงุฑ ุงููุนุงุฏูุงุช ุงูุฌุฏูุฏุฉ

### ๐ **ุงููููุงุช ุงููุญุฏุซุฉ:**
- `src/utils/calcSalary.ts` - ุงููุนุงุฏูุงุช ุงูุฌุฏูุฏุฉ
- `src/types/index.d.ts` - ุฃููุงุน ุงูุจูุงูุงุช
- `src/services/payrollService.ts` - ุฎุฏูุฉ ุงูุฑูุงุชุจ
- `src/pages/MonthlyEntries.tsx` - ุตูุญุฉ ุงูุฅุฏุฎุงูุงุช
- `src/pages/Payroll.tsx` - ุตูุญุฉ ุงูุฑูุงุชุจ
- `firestore.indexes.json` - ุงูููุงุฑุณ ุงูุฌุฏูุฏุฉ
- `package.json` - ุฃูุงูุฑ ุฌุฏูุฏุฉ

### ๐งช **ุงูุงุฎุชุจุงุฑุงุช:**
- โ ุงุฎุชุจุงุฑ ุงููุนุงุฏูุงุช ูุน ุงูุจูุงูุงุช ูู ุงูุตูุฑุฉ
- โ ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงูุดุงูู
- โ ุงุฎุชุจุงุฑ ุฌููุน ุงูุญุงูุงุช (ุจุฏูู ุฅุถุงููุ ูุน ุฅุถุงูู ูุงูู)
- โ ุงููุชุงุฆุฌ ุชุทุงุจู ุชูุงูุงู: `45.375`, `255.75`, `301.125`

## ๐ฏ **ุงูุชุทุจูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**

ุฌููุน ุงูุชุญุฏูุซุงุช ููุชููุฉ ูุงูุชุทุจูู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุน ุงููุนุงุฏูุงุช ุงูุฌุฏูุฏุฉ. ูููู ูููุณุชุฎุฏู ุงูุขู:

1. **ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ** ูู ุตูุญุฉ ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ
2. **ุฑุคูุฉ ุงูุญุณุงุจุงุช ุงูุตุญูุญุฉ** ูููุงู ูููุนุงุฏูุงุช ุงููุทููุจุฉ
3. **ุชูููุฏ ูุดูู ุงูุฑูุงุชุจ** ูุน ุงููุชุงุฆุฌ ุงููุญุฏุซุฉ
4. **ุงูุงุณุชูุงุฏุฉ ูู ุงูููุงุฑุณ ุงูุฌุฏูุฏุฉ** ูุชุญุณูู ุงูุฃุฏุงุก

---

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ:** ููุงูุฑ 2025  
**ุงููุทูุฑ:** ูุฑูู ูุธุงูุชู  
**ุงูุญุงูุฉ:** โ ููุชูู ุจูุฌุงุญ
