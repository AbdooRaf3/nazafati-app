# ูุธุงู ุงูุตูุงุญูุงุช - Permissions System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุตูุงุญูุงุช ูุชูุฏู ูุถูู ุฃู ูู ูุฑุงูุจ ููููู ููุท ูุดุงูุฏุฉ ูุฅุฏุงุฑุฉ ุงูููุธููู ูู ููุทูุชู ุงููุฎุตุตุฉ ูู.

## ๐ ูุณุชููุงุช ุงูุตูุงุญูุงุช

### 1. **ุงููุฏูุฑ (Admin)**
- โ **ุตูุงุญูุงุช ูุงููุฉ** ุนูู ุฌููุน ุงูููุงุทู
- โ **ุฅุฏุงุฑุฉ ุงูููุธููู** ูู ุฌููุน ุงูููุงุทู
- โ **ุนุฑุถ ุฌููุน ุงูุจูุงูุงุช** ูุงูุฅุญุตุงุฆูุงุช
- โ **ุชูููุฏ ูุดูู ุงูุฑูุงุชุจ** ูุฌููุน ุงูููุงุทู

### 2. **ุงููุฑุงูุจ (Supervisor)**
- โ **ุนุฑุถ ุงูููุธููู** ูู ููุทูุชู ููุท
- โ **ุฅุฏุงุฑุฉ ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ** ูููุทูุชู ููุท
- โ **ูุง ููููู** ูุดุงูุฏุฉ ููุธูู ุงูููุงุทู ุงูุฃุฎุฑู
- โ **ูุง ููููู** ุชูููุฏ ูุดูู ุงูุฑูุงุชุจ

### 3. **ูุณู ุงูุฑูุงุชุจ (Finance)**
- โ **ุนุฑุถ ุฌููุน ุงูููุธููู** ูุงูุฅุฏุฎุงูุงุช
- โ **ุชูููุฏ ูุดูู ุงูุฑูุงุชุจ** ูุฌููุน ุงูููุงุทู
- โ **ูุง ููููู** ุฅุฏุงุฑุฉ ุงูููุธููู

## ๐๏ธ ุงูุชูููุฐ ุงูุชููู

### 1. **ููุงุนุฏ Firestore**

```javascript
// ุงูููุธููู - ุงููุฑุงูุจ ููููู ูุฑุงุกุฉ ููุธูู ููุทูุชู ููุท
match /employees/{employeeId} {
  allow read: if isAdmin() || isFinance() || isEmployeeInOwnRegion(employeeId);
  allow write: if isAdmin();
  allow create, update, delete: if isSupervisor() && 
    request.resource.data.regionId == getUserData().regionId;
}

// ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ - ููุชุฑุฉ ุญุณุจ ุงูููุทูุฉ
match /monthly-entries/{entryId} {
  allow read: if isAdmin() || isFinance() || 
    (isSupervisor() && isEmployeeInOwnRegion(resource.data.employeeId));
}
```

### 2. **Hook ูุฎุตุต ููููุธููู**

```typescript
// useEmployees.ts
const { employees, loading, error } = useEmployees();

// ูุชู ุงูููุชุฑุฉ ุชููุงุฆูุงู ุญุณุจ ุตูุงุญูุงุช ุงููุณุชุฎุฏู:
// - ุงููุฏูุฑ: ุฌููุน ุงูููุธููู
// - ุงููุฑุงูุจ: ููุธูู ููุทูุชู ููุท
// - ูุณู ุงูุฑูุงุชุจ: ุฌููุน ุงูููุธููู
```

### 3. **ููุชุฑุฉ ุงูุจูุงูุงุช ูู ุงููุงุฌูุฉ**

```typescript
// ูู ุตูุญุฉ ุงูููุธููู
{!canViewAllRegions && userRegionId && (
  <p className="text-sm text-gray-600 mt-1">
    ุนุฑุถ ููุธูู ููุทูุชู ููุท (ุงูููุทูุฉ: {userRegionId})
  </p>
)}
```

## ๐ง ููููุฉ ุงูุนูู

### 1. **ุชุณุฌูู ุงูุฏุฎูู**
```typescript
// ุนูุฏ ุชุณุฌูู ุงูุฏุฎููุ ูุชู ุชุญุฏูุฏ:
const user = {
  uid: "user123",
  role: "supervisor",        // ููุน ุงููุณุชุฎุฏู
  regionId: "region-001",    // ุงูููุทูุฉ ุงููุฎุตุตุฉ
  name: "ุฃุญูุฏ ูุญูุฏ"
};
```

### 2. **ุฌูุจ ุงูุจูุงูุงุช**
```typescript
// ูุชู ุงูููุชุฑุฉ ุชููุงุฆูุงู ูู ุงูุฎุฏูุงุช
const employees = await FirestoreService.getAllEmployees(db, regionId);

// ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุฑุงูุจ:
// regionId = user.regionId (ููุทูุชู ููุท)
// ุฅุฐุง ูุงู ูุฏูุฑ ุฃู ูุณู ุฑูุงุชุจ:
// regionId = undefined (ุฌููุน ุงูููุงุทู)
```

### 3. **ุนุฑุถ ุงูุจูุงูุงุช**
```typescript
// ูู ุงูููููุงุชุ ูุชู ุนุฑุถ ุงูุจูุงูุงุช ุงููููุชุฑุฉ
const { employees } = useEmployees(); // ููุธูู ุงูููุทูุฉ ุงููุญุฏุฏุฉ ููุท
```

## ๐ ุงูุตูุญุงุช ุงููุชุฃุซุฑุฉ

### 1. **ุตูุญุฉ ุงูููุธููู**
- โ **ุงููุฑุงูุจ**: ูุฑู ููุธูู ููุทูุชู ููุท
- โ **ุงููุฏูุฑ**: ูุฑู ุฌููุน ุงูููุธููู
- โ **ูุณู ุงูุฑูุงุชุจ**: ูุฑู ุฌููุน ุงูููุธููู

### 2. **ุตูุญุฉ ุงูุฅุฏุฎุงูุงุช ุงูุดูุฑูุฉ**
- โ **ุงููุฑุงูุจ**: ูุฑู ุฅุฏุฎุงูุงุช ููุทูุชู ููุท
- โ **ุงููุฏูุฑ**: ูุฑู ุฌููุน ุงูุฅุฏุฎุงูุงุช
- โ **ูุณู ุงูุฑูุงุชุจ**: ูุฑู ุฌููุน ุงูุฅุฏุฎุงูุงุช

### 3. **ููุญุฉ ุงูุชุญูู**
- โ **ุงููุฑุงูุจ**: ุฅุญุตุงุฆูุงุช ููุทูุชู ููุท
- โ **ุงููุฏูุฑ**: ุฅุญุตุงุฆูุงุช ุดุงููุฉ
- โ **ูุณู ุงูุฑูุงุชุจ**: ุฅุญุตุงุฆูุงุช ุดุงููุฉ

### 4. **ูุดูู ุงูุฑูุงุชุจ**
- โ **ุงููุฑุงูุจ**: ูุง ููููู ุงููุตูู
- โ **ุงููุฏูุฑ**: ุฌููุน ุงูููุงุทู
- โ **ูุณู ุงูุฑูุงุชุจ**: ุฌููุน ุงูููุงุทู

## ๐ก๏ธ ุงูุฃูุงู

### 1. **ุญูุงูุฉ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- ููุงุนุฏ Firestore ุชููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู
- ูุง ูููู ุชุฌุงูุฒ ุงูุตูุงุญูุงุช ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ

### 2. **ุญูุงูุฉ ุนูู ูุณุชูู ุงูุชุทุจูู**
- ูุญุต ุงูุตูุงุญูุงุช ูู ูู ุนูููุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุนูุฏ ูุญุงููุฉ ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู

### 3. **ุญูุงูุฉ ุนูู ูุณุชูู ุงููุงุฌูุฉ**
- ุฅุฎูุงุก ุงูุฃุฒุฑุงุฑ ูุงููุธุงุฆู ุบูุฑ ุงููุณููุญุฉ
- ุฑุณุงุฆู ุชูุถูุญูุฉ ูููุณุชุฎุฏู

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. **ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช**
```typescript
// ุชุณุฌูู ุฏุฎูู ููุฑุงูุจ
const supervisor = {
  role: 'supervisor',
  regionId: 'region-001'
};

// ูุญุงููุฉ ุงููุตูู ูููุธู ูู ููุทูุฉ ุฃุฎุฑู
// ูุฌุจ ุฃู ุชูุดู ุงูุนูููุฉ
```

### 2. **ุงุฎุชุจุงุฑ ุงูููุชุฑุฉ**
```typescript
// ุงูุชุฃูุฏ ูู ุฃู ุงููุฑุงูุจ ูุฑู ููุธูู ููุทูุชู ููุท
const employees = await FirestoreService.getAllEmployees(db, 'region-001');
// ูุฌุจ ุฃู ุชุญุชูู ููุท ุนูู ููุธูู region-001
```

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. **ูููุทูุฑูู**
- ุงุณุชุฎุฏู `useEmployees()` hook ุจุฏูุงู ูู `useFirestoreCRUD` ูุจุงุดุฑุฉ
- ุชุฃูุฏ ูู ูุญุต ุงูุตูุงุญูุงุช ูุจู ูู ุนูููุฉ
- ุงุณุชุฎุฏู `useRegionAccess()` ููุชุญูู ูู ุงูุตูุงุญูุงุช

### 2. **ูููุณุชุฎุฏููู**
- ุงููุฑุงูุจูู ูุฑูู ููุท ุจูุงูุงุช ููุทูุชูู
- ุงููุฏูุฑูู ูุฑูู ุฌููุน ุงูุจูุงูุงุช
- ูุณู ุงูุฑูุงุชุจ ูุฑูู ุงูุจูุงูุงุช ุงููุนุชูุฏุฉ ููุท

### 3. **ููุฅุฏุงุฑุฉ**
- ูููู ุชุบููุฑ ููุทูุฉ ุงููุฑุงูุจ ูู ููุญุฉ ุชุญูู Firebase
- ูููู ุฅุถุงูุฉ ูุฑุงูุจูู ุฌุฏุฏ ูู ุฎูุงู ุงููุฏูุฑ
- ูููู ูุฑุงูุจุฉ ุงููุดุงุทุงุช ูู ุฎูุงู ุชูุงุฑูุฑ ุงูุฃุฎุทุงุก

## ๐ ุงูููุฒุงุช ุงููุณุชูุจููุฉ

- [ ] **ุชุณุฌูู ุงูุนูููุงุช**: ุชุชุจุน ุฌููุน ุงูุนูููุงุช ุญุณุจ ุงููุณุชุฎุฏู
- [ ] **ุตูุงุญูุงุช ูุฎุตุตุฉ**: ุฅุถุงูุฉ ุตูุงุญูุงุช ุฃูุซุฑ ุชูุตููุงู
- [ ] **ุฅุดุนุงุฑุงุช**: ุชูุจููุงุช ุนูุฏ ูุญุงููุฉ ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู
- [ ] **ุชูุงุฑูุฑ ุงูุตูุงุญูุงุช**: ุชูุงุฑูุฑ ููุตูุฉ ุนู ุงุณุชุฎุฏุงู ุงูุตูุงุญูุงุช

---

**ูุฐุง ุงููุธุงู ูุถูู ุงูุฃูุงู ูุงูุฎุตูุตูุฉ ูู ุฅุฏุงุฑุฉ ุงูููุธููู ุญุณุจ ุงูููุงุทู ุงููุฎุตุตุฉ ููู ูุฑุงูุจ.**
